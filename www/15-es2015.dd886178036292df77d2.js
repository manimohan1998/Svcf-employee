(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{mDHw:function(t,e,n){"use strict";n.r(e),n.d(e,"PaymentPageModule",(function(){return z}));var i=n("ofXK"),s=n("3Pt+"),r=n("tyNb"),o=n("TEn/"),a=n("mrSG"),c=n("AytR"),l=n("fXoL"),h=n("s5zK");function p(t,e){if(1&t&&(l.Pb(0,"p"),l.Pb(1,"span"),l.tc(2),l.Ob(),l.Ob()),2&t){const t=l.ac().$implicit;l.Ab(2),l.vc("\u20b9 ",null==t?null:t.NonPrizedArrear,"")}}function d(t,e){if(1&t&&(l.Pb(0,"p"),l.Pb(1,"span"),l.tc(2),l.Ob(),l.Ob()),2&t){const t=l.ac().$implicit;l.Ab(2),l.vc("\u20b9 ",null==t?null:t.PrizedArrear,"")}}const u=function(t){return{color:t}};function m(t,e){if(1&t){const t=l.Qb();l.Pb(0,"ion-card",16),l.Pb(1,"div",17),l.Pb(2,"div",18),l.Pb(3,"ion-checkbox",19),l.Xb("ionChange",(function(n){l.kc(t);const i=e.$implicit;return l.ac().updateCheckedOptions(i,n)})),l.Ob(),l.Ob(),l.Pb(4,"table",20),l.Pb(5,"tbody"),l.Pb(6,"tr"),l.Pb(7,"th"),l.tc(8,"Status"),l.Ob(),l.Pb(9,"td"),l.Pb(10,"p"),l.tc(11,":"),l.Ob(),l.Ob(),l.Pb(12,"td"),l.Pb(13,"span",21),l.tc(14),l.Ob(),l.Ob(),l.Ob(),l.Pb(15,"tr"),l.Pb(16,"th"),l.tc(17,"Ag. No/Year"),l.Ob(),l.Pb(18,"td"),l.Pb(19,"p"),l.tc(20,":"),l.Ob(),l.Ob(),l.Pb(21,"td"),l.tc(22),l.Ob(),l.Ob(),l.Pb(23,"tr"),l.Pb(24,"td"),l.Pb(25,"span",22),l.tc(26),l.Ob(),l.Ob(),l.Ob(),l.Pb(27,"tr"),l.Pb(28,"th"),l.tc(29,"Chit No"),l.Ob(),l.Pb(30,"td"),l.Pb(31,"p"),l.tc(32,":"),l.Ob(),l.Ob(),l.Pb(33,"td"),l.Pb(34,"span"),l.tc(35),l.Ob(),l.Ob(),l.Ob(),l.Pb(36,"tr"),l.Pb(37,"th"),l.tc(38,"Current Inst No"),l.Ob(),l.Pb(39,"td"),l.Pb(40,"p"),l.tc(41,":"),l.Ob(),l.Ob(),l.Pb(42,"td"),l.Pb(43,"span"),l.tc(44),l.Ob(),l.Ob(),l.Ob(),l.Pb(45,"tr"),l.Pb(46,"th"),l.tc(47,"Current Due"),l.Ob(),l.Pb(48,"td"),l.Pb(49,"p"),l.tc(50,":"),l.Ob(),l.Ob(),l.Pb(51,"td"),l.Pb(52,"span"),l.tc(53),l.Ob(),l.Ob(),l.Ob(),l.Pb(54,"tr"),l.Pb(55,"th"),l.tc(56,"Arrear"),l.Ob(),l.Pb(57,"td"),l.Pb(58,"p"),l.tc(59,":"),l.Ob(),l.Ob(),l.Pb(60,"td"),l.sc(61,p,3,1,"p",11),l.sc(62,d,3,1,"p",11),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(63,"div",23),l.Pb(64,"p"),l.tc(65),l.Ob(),l.Ob(),l.Pb(66,"div",24),l.Pb(67,"p",25),l.tc(68,"Chit Value \u20b9 "),l.Pb(69,"span"),l.tc(70),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){const t=e.$implicit;l.Ab(13),l.fc("ngStyle",l.hc(12,u,"R"===(null==t?null:t.status)?"green":"red")),l.Ab(1),l.uc(null==t?null:t.status),l.Ab(8),l.vc(" ",null==t?null:t.agreementno," "),l.Ab(4),l.uc(t.BranchName),l.Ab(9),l.uc(null==t?null:t.groupno),l.Ab(9),l.uc(null==t?null:t.instno),l.Ab(9),l.vc(" \u20b9 ",null==t?null:t.CurrentDueAmount,""),l.Ab(8),l.fc("ngIf","Non-Prized"===(null==t?null:t.isprized)),l.Ab(1),l.fc("ngIf","Prized"===(null==t?null:t.isprized)),l.Ab(1),l.fc("ngClass","Prized"===(null==t?null:t.isprized)?"green":"red"),l.Ab(2),l.uc(null==t?null:t.isprized),l.Ab(5),l.uc(null==t?null:t.totalchitvalue)}}function g(t,e){1&t&&(l.Pb(0,"ion-card"),l.Lb(1,"ion-img",26),l.Ob())}let b=(()=>{class t{constructor(t,e,n,i,s){this.route=t,this.alertController=e,this.router=n,this.paymentservice=i,this.toastController=s,this.today=Date.now(),this.arrayvalue=[],this.pushvalue=[],this.green=!1,this.red=!1,this.checkbox=!1,this.new_check=!1,this.prized_array=[],this.nonprized_array=[],this.arrayprized=[],this.prized_chits=[]}ionViewWillEnter(){this.imageUrl=c.a.Imageurl,this.arrayvalue=[],this.newarr=[],this.pushvalue=[],this.user_details=JSON.parse(localStorage.getItem("user2"));let t=localStorage.getItem("tokens");this.paymentservice.payment_details(this.user_details.MemberID,t).subscribe(t=>{this.payee_details=t;for(let n=0;n<this.payee_details.length;n++){if(this.status=this.payee_details[n].status,this.arrear=this.payee_details[n].arrearamount,this.prized=this.payee_details[n].isprized,"R"==this.status||this.arrear>0){this.pushvalue.push(this.payee_details[n]);var e=[];this.newarr=this.pushvalue.filter((function(t){return-1==e.indexOf(t.groupno)&&(e.push(t.groupno),!0)})),this.length1=this.pushvalue.length,this.profile=this.newarr[0].ImgUrl}this.payee_details[n].isprized="N"==this.payee_details[n].isprized?"Non-Prized":"Prized"}},t=>{401===t.status?(this.presentToast("Session timeout, please login to continue."),this.router.navigate(["/login"])):400===t.status&&(this.presentToast("Server Error! Please try login again."),this.router.navigate(["/login"]))})}ngOnInit(){}updateCheckedOptions(t,e){if(e.detail.checked&&this.arrayvalue.push(t),!e.detail.checked){let e=this.arrayvalue.indexOf(t);e>-1&&this.arrayvalue.splice(e,1)}}previous(){this.router.navigateByUrl("dashboard")}cash(){if(this.prized_chits=[],0==this.arrayvalue.length)return this.presentToast("Please choose atleast one chit");for(var t=0;t<this.newarr.length;t++)"Prized"==this.newarr[t].isprized&&this.prized_chits.push(this.newarr[t]);if(0!=this.prized_chits.length){if(this.arrayvalue.length<=1){if("Prized"!=this.arrayvalue[0].isprized)return this.presentToast("Must choose atleast 1 Prized Chit");{let t=JSON.stringify(this.arrayvalue);this.router.navigate(["payment/cash"],{queryParams:{state:t},skipLocationChange:!0})}}else if(2==this.arrayvalue.length){for(let t=0;t<this.arrayvalue.length;t++)"Prized"==this.arrayvalue[t].isprized&&this.arrayprized.push(this.arrayvalue[t]);if(0==this.arrayprized.length)return this.presentToast("Choose atleast 1 prized chits");{let t=JSON.stringify(this.arrayvalue);this.router.navigate(["payment/cash"],{queryParams:{state:t},skipLocationChange:!0})}}else if(this.arrayvalue.length>2)if(1==this.prized_chits.length){let t=JSON.stringify(this.arrayvalue);this.router.navigate(["payment/cash"],{queryParams:{state:t},skipLocationChange:!0})}else if(this.prized_chits.length>=2){for(let t=0;t<this.arrayvalue.length;t++)"Prized"==this.arrayvalue[t].isprized&&this.arrayprized.push(this.arrayvalue[t]);if(this.arrayprized.length<2)return this.presentToast("Choose atleast 2 prized chits");{let t=JSON.stringify(this.arrayvalue);this.router.navigate(["payment/cash"],{queryParams:{state:t},skipLocationChange:!0})}}}else{let t=JSON.stringify(this.arrayvalue);this.router.navigate(["payment/cash"],{queryParams:{state:t},skipLocationChange:!0})}}logout(){this.presentAlertConfirm()}presentAlertConfirm(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({message:"Are you sure you want to logout?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Logout",handler:()=>{localStorage.clear(),this.router.navigate(["login"])}}]});yield t.present()}))}presentToast(t){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:t,duration:2e3})).present()}))}}return t.\u0275fac=function(e){return new(e||t)(l.Kb(r.a),l.Kb(o.a),l.Kb(r.g),l.Kb(h.a),l.Kb(o.F))},t.\u0275cmp=l.Eb({type:t,selectors:[["app-payment"]],decls:30,vars:10,consts:[[1,"svcf_dashboard_page"],[1,"customer_details"],["size","12"],["size","8",1,"customer_name"],["size","8"],["size","3",1,"profile_img"],["onError","this.src='assets/images/user.jpg'",3,"src"],["size","1",1,"menu"],["name","exit",3,"click"],[1,"total_chits"],["class","card_bg",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"p-24"],["name","cash",1,"icon"],[1,"text"],[1,"btn",2,"width","100%",3,"click"],[1,"card_bg"],[1,"chits_item_details"],[1,"mr-1"],[3,"ionChange"],[1,"table","chit_details"],[3,"ngStyle"],[1,"branch_name"],[1,"chit_status",3,"ngClass"],[1,"bottom_sec"],["size","6"],["src","assets/images/nodata.jpeg",1,"no"]],template:function(t,e){1&t&&(l.Pb(0,"ion-content",0),l.Pb(1,"section",1),l.Pb(2,"ion-row",2),l.Pb(3,"ion-col",3),l.Pb(4,"h2",4),l.tc(5),l.Ob(),l.Pb(6,"h5",4),l.tc(7),l.bc(8,"date"),l.Ob(),l.Ob(),l.Pb(9,"ion-col",5),l.Pb(10,"ion-avatar"),l.Pb(11,"span"),l.Lb(12,"img",6),l.Ob(),l.Ob(),l.Ob(),l.Pb(13,"ion-col",7),l.Pb(14,"ion-icon",8),l.Xb("click",(function(){return e.logout()})),l.Ob(),l.Ob(),l.Ob(),l.Pb(15,"p",9),l.tc(16,"No. of Chits "),l.Pb(17,"span"),l.tc(18),l.Ob(),l.Ob(),l.Ob(),l.sc(19,m,71,14,"ion-card",10),l.sc(20,g,2,0,"ion-card",11),l.Pb(21,"section",12),l.Pb(22,"ion-list"),l.Pb(23,"ion-item"),l.Pb(24,"ion-label"),l.Lb(25,"ion-icon",13),l.Pb(26,"span",14),l.tc(27,"Cash Payment "),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(28,"ion-button",15),l.Xb("click",(function(){return e.cash()})),l.tc(29,"Proceed"),l.Ob(),l.Ob(),l.Ob()),2&t&&(l.Ab(5),l.uc(null==e.user_details?null:e.user_details.MemberName),l.Ab(2),l.uc(l.cc(8,7,e.today,"dd/MM/yyyy")),l.Ab(5),l.gc("src","",e.imageUrl,"",e.profile,"",l.lc),l.Ab(6),l.uc(null==e.user_details?null:e.user_details.chitcount),l.Ab(1),l.fc("ngForOf",e.newarr),l.Ab(1),l.fc("ngIf",0===e.length1))},directives:[o.k,o.u,o.j,o.d,o.n,i.j,i.k,o.s,o.q,o.r,o.e,o.f,o.i,o.b,i.l,i.i,o.o],pipes:[i.d],styles:[".flex_arrow[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.bottom_sec[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.arrow[_ngcontent-%COMP%]{background:linear-gradient(90deg,#222428 0,#354466)!important}.payment[_ngcontent-%COMP%]{--background:linear-gradient(90deg,#222428 0%,#354466)!important}.payee_name[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-left:12px}.flex-page[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.flex-page[_ngcontent-%COMP%]   .payee_no[_ngcontent-%COMP%]{margin-left:12px}.flex-page[_ngcontent-%COMP%]   .data-no[_ngcontent-%COMP%]{margin-right:1rem;color:#5e5ca5;font-weight:700}.left[_ngcontent-%COMP%]{border-right:1px solid #f05940}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.title[_ngcontent-%COMP%]   .pipe[_ngcontent-%COMP%]{margin-left:12px}ion-card[_ngcontent-%COMP%]{background-color:#f6f6fa}.value[_ngcontent-%COMP%]{color:#272727}ion-checkbox[_ngcontent-%COMP%]{float:right}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:15px;float:right;margin-top:2px}.mode[_ngcontent-%COMP%]{margin-left:12px}.text[_ngcontent-%COMP%]{padding-left:10px}.icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.icon[_ngcontent-%COMP%]{font-size:22px;color:#6765aa}.cash-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:15px}.cash-content[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{display:block;font-size:14px;margin:16px 0}.alert-message.sc-ion-alert-md[_ngcontent-%COMP%]{font-size:18px}.exit[_ngcontent-%COMP%]{color:#fff;display:inline-block;font-size:22px;vertical-align:middle}.inner[_ngcontent-%COMP%]{margin-top:10px}.payable[_ngcontent-%COMP%]{font-weight:700}.payable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(52,162,20,.5215686274509804);padding:2px 10px;border-radius:5px}.align[_ngcontent-%COMP%]{margin-bottom:20px}.new_card[_ngcontent-%COMP%]{margin-top:20px}.total-chit[_ngcontent-%COMP%]{padding-right:12px}.align[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.align[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:-42px}.flex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.logout[_ngcontent-%COMP%]{padding-top:2rem;padding-right:2rem;color:#fff}.arrow[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem;background:#37348b;border-radius:50%;color:#fff;font-size:30px}.today_date[_ngcontent-%COMP%]{color:#fff;margin-left:12px}.cash[_ngcontent-%COMP%]{--background:linear-gradient(90deg,#222428 0%,#354466)!important}.bottom_icon[_ngcontent-%COMP%]{position:fixed;left:85%;bottom:2px;border-radius:50%;font-size:28px;background:#37348b;padding:5px;color:#fff}.text1[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding-left:10px;color:#fff}.icon_tool[_ngcontent-%COMP%]{padding-top:1rem;padding-right:1rem}.payeename[_ngcontent-%COMP%]{margin-top:1rem}.bank[_ngcontent-%COMP%]{padding-left:8px}.amt[_ngcontent-%COMP%], .bank[_ngcontent-%COMP%]{font-weight:700}.amt[_ngcontent-%COMP%]{color:#000}ion-spinner[_ngcontent-%COMP%]{stroke:red;fill:#8b0000;position:fixed;z-index:999;height:5em;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0}.card_bg[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card_bg[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:700}"]}),t})();var _=n("SmVF");function f(t,e){1&t&&(l.Pb(0,"ion-item"),l.Pb(1,"ion-label",19),l.tc(2,"Arrear "),l.Ob(),l.Lb(3,"ion-input",25),l.Ob())}function P(t,e){1&t&&(l.Pb(0,"ion-item"),l.Pb(1,"ion-label",19),l.tc(2," Arrear"),l.Ob(),l.Lb(3,"ion-input",26),l.Ob())}function y(t,e){if(1&t){const t=l.Qb();l.Pb(0,"div"),l.Pb(1,"div",15),l.Pb(2,"ion-card"),l.Pb(3,"ion-card-header"),l.Pb(4,"p"),l.tc(5,"Chit Value"),l.Pb(6,"span"),l.tc(7),l.Ob(),l.Ob(),l.Pb(8,"p",16),l.tc(9),l.Ob(),l.Ob(),l.Pb(10,"ion-card-content"),l.Pb(11,"p",17),l.tc(12,"Amount payable"),l.Pb(13,"span"),l.tc(14),l.Ob(),l.Ob(),l.Pb(15,"div",18),l.Pb(16,"ion-item"),l.Pb(17,"ion-label",19),l.tc(18,"Current Due"),l.Ob(),l.Lb(19,"ion-input",20),l.Ob(),l.sc(20,f,4,0,"ion-item",21),l.sc(21,P,4,0,"ion-item",21),l.Pb(22,"ion-item"),l.Pb(23,"ion-label",19),l.tc(24,"Amount Received"),l.Ob(),l.Pb(25,"ion-input",22),l.Xb("keypress",(function(e){return l.kc(t),l.ac().CheckSpace(e)})),l.Ob(),l.Ob(),l.Pb(26,"ion-item"),l.Pb(27,"ion-label",19),l.tc(28,"Interest"),l.Ob(),l.Pb(29,"ion-input",23),l.Xb("keypress",(function(e){return l.kc(t),l.ac().CheckSpace(e)})),l.Ob(),l.Ob(),l.Pb(30,"ion-item"),l.Pb(31,"ion-label",19),l.tc(32,"Other Amount"),l.Ob(),l.Pb(33,"ion-input",24),l.Xb("keypress",(function(e){return l.kc(t),l.ac().CheckSpace(e)})),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){const t=e.$implicit,n=e.index;l.Ab(1),l.fc("formGroupName",n),l.Ab(6),l.vc("\u20b9 ",null==t?null:t.totalchitvalue,""),l.Ab(2),l.uc(null==t?null:t.groupno),l.Ab(5),l.vc("\u20b9 ",null==t?null:t.TotalPayable,""),l.Ab(6),l.fc("ngIf","Prized"==(null==t?null:t.isprized)),l.Ab(1),l.fc("ngIf","Non-Prized"==(null==t?null:t.isprized))}}let O=(()=>{class t{constructor(t,e,n,i,s,r){this.route=t,this.toast=e,this.alertController=n,this.router=i,this.fb=s,this.paymentservice=r,this.today=Date.now(),this.cash_details=[],this.brid1=[],this.test=!1,this.index_value=[],this.route.queryParams.subscribe(t=>{this.router.getCurrentNavigation().extras.state&&(this.is=this.router.getCurrentNavigation().extras.state.user7,this.is_array=this.router.getCurrentNavigation().extras.state.user8)}),this.route.queryParams.subscribe(t=>{this.i_details=JSON.parse(t.state),console.log(this.i_details);for(let e=0;e<this.i_details.length;e++)this.brid=this.i_details[e].BranchID,this.brid1.push(this.brid);this.chit_value=this.i_details.Chitvalue})}ngOnInit(){this.cashForm=new s.g({formArrayName:this.fb.array([])}),this.buildForm()}buildForm(){const t=this.cashForm.get("formArrayName");Object.keys(this.i_details).forEach(e=>{t.push(this.fb.group(0!=this.i_details[e].TotalPayable?{branchprefix:new s.e(this.i_details[e].BranchPrefix,s.s.required),branchname:new s.e(this.i_details[e].Branch,s.s.required),groupno:new s.e(this.i_details[e].groupno,s.s.required),totalchit:new s.e(this.i_details[e].totalchitvalue,s.s.required),branchid:new s.e(this.i_details[e].BranchID,s.s.required),memberid:new s.e(this.i_details[e].Mid,s.s.required),m_id:new s.e(this.i_details[e].MemberID,s.s.required),rootid:new s.e(this.i_details[e].rootid,s.s.required),headid:new s.e(this.i_details[e].headID,s.s.required),chitgroupid:new s.e(this.i_details[e].chitgroupid,s.s.required),installment:new s.e(this.i_details[e].instno,s.s.required),agreement:new s.e(this.i_details[e].agreementno,s.s.required),amountreceived:new s.e(this.i_details[e].CurrentDueAmount),prizedarrear:new s.e(this.i_details[e].PrizedArrear,s.s.required),nonprizedarrear:new s.e(this.i_details[e].NonPrizedArrear,s.s.required),interest:new s.e("",s.s.compose([s.s.pattern("[. , 0-9 ]*")])),otheramount:new s.e("",s.s.compose([s.s.pattern("[. , 0-9 ]*")])),amountpayable:new s.e("",s.s.compose([s.s.required,s.s.pattern("^[1-9][. , 0-9]*$")]))}:{branchprefix:new s.e(this.i_details[e].BranchPrefix,s.s.required),branchname:new s.e(this.i_details[e].Branch,s.s.required),groupno:new s.e(this.i_details[e].chitgroupno,s.s.required),totalchit:new s.e(this.i_details[e].totalchitvalue,s.s.required),branchid:new s.e(this.i_details[e].BranchID,s.s.required),memberid:new s.e(this.i_details[e].Mid,s.s.required),m_id:new s.e(this.i_details[e].MemberID,s.s.required),rootid:new s.e(this.i_details[e].rootid,s.s.required),headid:new s.e(this.i_details[e].headID,s.s.required),chitgroupid:new s.e(this.i_details[e].chitgroupid,s.s.required),installment:new s.e(this.i_details[e].instno,s.s.required),agreement:new s.e(this.i_details[e].agreementno,s.s.required),amountreceived:new s.e(this.i_details[e].CurrentDueAmount),prizedarrear:new s.e(this.i_details[e].PrizedArrear,s.s.required),nonprizedarrear:new s.e(this.i_details[e].NonPrizedArrear,s.s.required),interest:new s.e("",s.s.compose([s.s.pattern("[. , 0-9 ]*")])),otheramount:new s.e("",s.s.compose([s.s.pattern("[. , 0-9 ]*")])),amountpayable:new s.e("",s.s.compose([]))}))})}presentToast(t){return Object(a.a)(this,void 0,void 0,(function*(){this.toast.show(t,"2000","bottom").subscribe(t=>{console.log(t)})}))}check(){console.log(this.cashForm.value.interest)}submit(t){this.new_check=t.formArrayName,console.log(this.new_check);var e=0;this.final_total=this.new_check.map((function(t){var e=Object.assign({},t);return e.total=+t.amountpayable.replace(/,/g,"")+ +t.interest.replace(/,/g,"")+ +t.otheramount.replace(/,/g,""),e}));for(let n=0;n<this.final_total.length;n++)e+=parseFloat(this.final_total[n].total),this.grandtotal=e,this.grandtotal1=Number(parseFloat(this.grandtotal).toFixed(2)).toLocaleString("en",{minimumFractionDigits:2});console.log(this.grandtotal1),0==this.grandtotal?this.presentToast("Please check values before submitting"):this.presentAlertConfirm(t,this.grandtotal1)}previous(){this.router.navigateByUrl("payment")}logout(){this.presentAlertConfirm1()}presentAlertConfirm(t,e){return Object(a.a)(this,void 0,void 0,(function*(){console.log(e);const n=yield this.alertController.create({message:"You have entered a grand total of \u20b9"+e,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Proceed",handler:()=>{this.cash_array=t.formArrayName;let e={state:{user6:this.cash_array,user10:this.i_details}};localStorage.setItem("totalamounts",this.grandtotal1),this.router.navigate(["payment/cashpay"],e)}}]});yield n.present()}))}presentAlertConfirm1(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({message:"Are you sure you want to logout?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Logout",handler:()=>{this.router.navigate(["login"]),localStorage.clear()}}]});yield t.present()}))}CheckSpace(t){if(32==t.which)return t.preventDefault(),!1}}return t.\u0275fac=function(e){return new(e||t)(l.Kb(r.a),l.Kb(_.a),l.Kb(o.a),l.Kb(r.g),l.Kb(s.d),l.Kb(h.a))},t.\u0275cmp=l.Eb({type:t,selectors:[["app-payment"]],decls:22,vars:9,consts:[[1,"svcf_dashboard_page","svcf_payment_page"],[1,"customer_details"],["name","arrow-back-outline",2,"font-size","25px",3,"click"],["size","12"],["size","11",1,"customer_name"],["size","8"],["size","1",1,"menu"],["name","exit",3,"click"],[1,"payment","card_bg","space_padding"],[1,"page_title"],["name","create-outline","slot","end"],[3,"formGroup"],[1,"payment_form",3,"formArrayName"],[4,"ngFor","ngForOf"],["type","submit","expand","block",1,"btn",3,"disabled","click"],[3,"formGroupName"],[1,"chit_no"],[1,"payable"],[1,"inner"],["position","stacked"],["formControlName","amountreceived","value","","placeholder","Current Due","readonly",""],[4,"ngIf"],["formControlName","amountpayable","value","","placeholder","Amount Received",3,"keypress"],["formControlName","interest","value","","placeholder","Interest",3,"keypress"],["formControlName","otheramount","value","","placeholder","Other Amount",3,"keypress"],["formControlName","prizedarrear","value","","placeholder","Prized Arrear","readonly",""],["formControlName","nonprizedarrear","placeholder","Non Prized Arrear","readonly",""]],template:function(t,e){1&t&&(l.Pb(0,"ion-content",0),l.Pb(1,"section",1),l.Pb(2,"ion-icon",2),l.Xb("click",(function(){return e.previous()})),l.Ob(),l.Pb(3,"ion-row",3),l.Pb(4,"ion-col",4),l.Pb(5,"h2",5),l.tc(6),l.Ob(),l.Pb(7,"h5",5),l.tc(8),l.bc(9,"date"),l.Ob(),l.Ob(),l.Pb(10,"ion-col",6),l.Pb(11,"ion-icon",7),l.Xb("click",(function(){return e.logout()})),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(12,"div",8),l.Pb(13,"div",9),l.Pb(14,"h3"),l.tc(15,"Chit Details"),l.Ob(),l.Lb(16,"ion-icon",10),l.Ob(),l.Pb(17,"form",11),l.Pb(18,"div",12),l.sc(19,y,34,6,"div",13),l.Ob(),l.Pb(20,"ion-button",14),l.Xb("click",(function(){return e.submit(e.cashForm.value)})),l.tc(21,"Submit "),l.Ob(),l.Ob(),l.Ob(),l.Ob()),2&t&&(l.Ab(6),l.uc(e.i_details[0].Membername),l.Ab(2),l.uc(l.cc(9,6,e.today,"dd/MM/yyyy")),l.Ab(9),l.fc("formGroup",e.cashForm),l.Ab(1),l.fc("formArrayName","formArrayName"),l.Ab(1),l.fc("ngForOf",e.i_details),l.Ab(1),l.fc("disabled",!e.cashForm.valid))},directives:[o.k,o.n,o.u,o.j,s.t,s.o,s.h,s.c,i.j,o.e,s.i,o.f,o.h,o.g,o.q,o.r,o.p,o.E,s.n,s.f,i.k],pipes:[i.d],styles:[".flex_arrow[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.bottom_sec[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.arrow[_ngcontent-%COMP%]{background:linear-gradient(90deg,#222428 0,#354466)!important}.payment[_ngcontent-%COMP%]{--background:linear-gradient(90deg,#222428 0%,#354466)!important}.payee_name[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-left:12px}.flex-page[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.flex-page[_ngcontent-%COMP%]   .payee_no[_ngcontent-%COMP%]{margin-left:12px}.flex-page[_ngcontent-%COMP%]   .data-no[_ngcontent-%COMP%]{margin-right:1rem;color:#5e5ca5;font-weight:700}.left[_ngcontent-%COMP%]{border-right:1px solid #f05940}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.title[_ngcontent-%COMP%]   .pipe[_ngcontent-%COMP%]{margin-left:12px}ion-card[_ngcontent-%COMP%]{background-color:#f6f6fa}.value[_ngcontent-%COMP%]{color:#272727}ion-checkbox[_ngcontent-%COMP%]{float:right}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:15px;float:right;margin-top:2px}.mode[_ngcontent-%COMP%]{margin-left:12px}.text[_ngcontent-%COMP%]{padding-left:10px}.icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.icon[_ngcontent-%COMP%]{font-size:22px;color:#6765aa}.cash-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:15px}.cash-content[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{display:block;font-size:14px;margin:16px 0}.alert-message.sc-ion-alert-md[_ngcontent-%COMP%]{font-size:18px}.exit[_ngcontent-%COMP%]{color:#fff;display:inline-block;font-size:22px;vertical-align:middle}.inner[_ngcontent-%COMP%]{margin-top:10px}.payable[_ngcontent-%COMP%]{font-weight:700}.payable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(52,162,20,.5215686274509804);padding:2px 10px;border-radius:5px}.align[_ngcontent-%COMP%]{margin-bottom:20px}.new_card[_ngcontent-%COMP%]{margin-top:20px}.total-chit[_ngcontent-%COMP%]{padding-right:12px}.align[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.align[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:-42px}.flex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.logout[_ngcontent-%COMP%]{padding-top:2rem;padding-right:2rem;color:#fff}.arrow[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem;background:#37348b;border-radius:50%;color:#fff;font-size:30px}.today_date[_ngcontent-%COMP%]{color:#fff;margin-left:12px}.cash[_ngcontent-%COMP%]{--background:linear-gradient(90deg,#222428 0%,#354466)!important}.bottom_icon[_ngcontent-%COMP%]{position:fixed;left:85%;bottom:2px;border-radius:50%;font-size:28px;background:#37348b;padding:5px;color:#fff}.text1[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding-left:10px;color:#fff}.icon_tool[_ngcontent-%COMP%]{padding-top:1rem;padding-right:1rem}.payeename[_ngcontent-%COMP%]{margin-top:1rem}.bank[_ngcontent-%COMP%]{padding-left:8px}.amt[_ngcontent-%COMP%], .bank[_ngcontent-%COMP%]{font-weight:700}.amt[_ngcontent-%COMP%]{color:#000}ion-spinner[_ngcontent-%COMP%]{stroke:red;fill:#8b0000;position:fixed;z-index:999;height:5em;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0}.card_bg[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card_bg[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:700}"]}),t})();n("0tRk");var C=n("wd/R"),v=n("tk/3");function M(t,e){1&t&&(l.Pb(0,"ion-item"),l.Pb(1,"ion-label",18),l.tc(2,"Prized Arrear "),l.Ob(),l.Lb(3,"ion-input",26),l.Ob())}function w(t,e){1&t&&(l.Pb(0,"ion-item"),l.Pb(1,"ion-label",18),l.tc(2,"Non-Prized Arrear"),l.Ob(),l.Lb(3,"ion-input",27),l.Ob())}function x(t,e){if(1&t&&(l.Pb(0,"div"),l.Pb(1,"div",16),l.Pb(2,"ion-card"),l.Pb(3,"ion-card-header"),l.Pb(4,"p"),l.tc(5,"Chit Value"),l.Pb(6,"span"),l.tc(7),l.Ob(),l.Ob(),l.Pb(8,"p",17),l.tc(9),l.Ob(),l.Ob(),l.Pb(10,"ion-card-content"),l.Pb(11,"ion-item"),l.Pb(12,"ion-label",18),l.tc(13,"Current Due"),l.Ob(),l.Lb(14,"ion-input",19),l.Ob(),l.sc(15,M,4,0,"ion-item",20),l.sc(16,w,4,0,"ion-item",20),l.Pb(17,"ion-item"),l.Pb(18,"ion-label",18),l.tc(19,"Amount Received"),l.Ob(),l.Lb(20,"ion-input",21),l.Ob(),l.Pb(21,"ion-item"),l.Pb(22,"ion-label",18),l.tc(23,"Interest"),l.Ob(),l.Lb(24,"ion-input",22),l.Ob(),l.Pb(25,"ion-item"),l.Pb(26,"ion-label",18),l.tc(27,"Other Amount"),l.Ob(),l.Lb(28,"ion-input",23),l.Ob(),l.Pb(29,"div",24),l.Pb(30,"span"),l.tc(31," Total"),l.Ob(),l.Pb(32,"span",25),l.tc(33),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()),2&t){const t=e.$implicit,n=e.index;l.Ab(1),l.fc("formGroupName",n),l.Ab(6),l.vc("\u20b9 ",t.totalchit,""),l.Ab(2),l.uc(t.groupno),l.Ab(6),l.fc("ngIf",0!=(null==t?null:t.prizedarrear)),l.Ab(1),l.fc("ngIf",0!=(null==t?null:t.nonprizedarrear)),l.Ab(17),l.vc(" \u20b9 ",t.total1,"")}}let I=(()=>{class t{constructor(t,e,n,i,s,r,o){this.fb=t,this.toast=e,this.http=n,this.loadingController=i,this.router=s,this.route=r,this.paymentservice=o,this.today=Date.now(),this.new_array=[],this.cashdata=[],this.cashdat=[],this.cashdata1=[],this.cashdata2=[],this.count=1111,this.branch1=[],this.sampledata=[],this.trigger=0,this.sampledata1=[],this.num1=[],this.vnum1=[],this.ReceiptTable1=[],this.sampleinterest=[],this.sampletestcheck=[],this.isLoading=!1,this.new_total=[],this.B_Groups=[],this.arraydata=[],this.userdata=[],this.route.queryParams.subscribe(t=>{if(this.router.getCurrentNavigation().extras.state){this.new=this.router.getCurrentNavigation().extras.state.user6,this.new10=this.router.getCurrentNavigation().extras.state.user10,console.log(this.new10),this.B_Groups=[];for(let t=0;t<this.new10.length;t++)this.B_Groups.push(this.new10[t].B_Group),this.branch_new=this.new10[t].BranchID,this.head=this.new10[t].headID,this.branch1.push(this.branch_new),this.sampletest1=[{BranchID:this.new10[t].BranchID,HeadID:this.new10[t].headID}],this.sampledata.push(this.sampletest1),this.sampledata1=[].concat.apply([],this.sampledata);this.new_array=this.new}})}ngOnInit(){function t(t){for(var e="a".charCodeAt(0),n="z".charCodeAt(0)-e+1,i="";t>=0;)i=String.fromCharCode(t%n+e)+i,t=Math.floor(t/n)-1;return i}this.arraydata=[];for(let s=0;s<18278;s++){var e=t(s);this.arraydata.push(e)}console.log(this.arraydata);let n=localStorage.getItem("tokens");this.paymentservice.receiptseries("BCAPP",n).subscribe(t=>{this.voucher_count=t,console.log(this.voucher_count)},t=>{401===t.status?(this.dismiss(),this.presentToast("Session timeout, please login to continue."),this.router.navigate(["/login"])):400===t.status&&(this.dismiss(),this.presentToast("Server Error! Please try login again."),this.router.navigate(["/login"]))}),this.paymentservice.receiptseries1("BCAPP",n).subscribe(t=>{this.Receipt_code=t,console.log(this.Receipt_code)},t=>{401===t.status?(this.dismiss(),this.presentToast("Session timeout, please login to continue."),this.router.navigate(["/login"])):400===t.status&&(this.dismiss(),this.presentToast("Server Error! Please try login again."),this.router.navigate(["/login"]))});var i=0;this.result=this.new_array.map((function(t){var e=Object.assign({},t);return e.total=+t.amountpayable.replace(/,/g,"")+ +t.interest.replace(/,/g,"")+ +t.otheramount.replace(/,/g,""),e.total1=Number(parseFloat(e.total).toFixed(2)).toLocaleString("en",{minimumFractionDigits:2}),e})),console.log(this.result,"res");for(let s=0;s<this.result.length;s++)""!=this.result[s].interest&&""==this.result[s].otheramount?this.result[s].otheramount=0:""!=this.result[s].otheramount&&""==this.result[s].interest?this.result[s].interest=0:""==this.result[s].interest&&""==this.result[s].otheramount?(this.result[s].interest=0,this.result[s].otheramount=0):""==this.result[s].amountpayable&&(this.result[s].amountpayable=0),i+=parseFloat(this.result[s].total),this.grand_total=i,this.grandtotal1=Number(parseFloat(this.grand_total).toFixed(2)).toLocaleString("en",{minimumFractionDigits:2});this.post_id=localStorage.getItem("col_id"),this.nedate=new Date,this.day=C(this.nedate.toLocaleString()).format("DD"),this.month=C(this.nedate.toLocaleString()).format("MM"),this.year=C(this.nedate.toLocaleString()).format("YYYY"),this.submitForm=new s.g({formArrayName:this.fb.array([])}),this.buildForm1()}buildForm1(){const t=this.submitForm.get("formArrayName");Object.keys(this.result).forEach(e=>{t.push(this.fb.group({branchprefix:new s.e(this.result[e].branchprefix,s.s.required),branchname:new s.e(this.result[e].branchname,s.s.required),groupno:new s.e(this.result[e].groupno,s.s.required),totalchit:new s.e(this.result[e].totalchit,s.s.required),branchid:new s.e(this.result[e].branchid,s.s.required),memberid:new s.e(this.result[e].memberid,s.s.required),m_id:new s.e(this.result[e].m_id,s.s.required),rootid:new s.e(this.result[e].rootid,s.s.required),headid:new s.e(this.result[e].headid,s.s.required),chitgroupid:new s.e(this.result[e].chitgroupid,s.s.required),agreement:new s.e(this.result[e].agreement,s.s.required),installment:new s.e(this.result[e].installment,s.s.required),amountreceived:new s.e(this.new_array[e].amountreceived),amountpayable:new s.e(this.new_array[e].amountpayable),prizedarrear:new s.e(this.new_array[e].prizedarrear),nonprizedarrear:new s.e(this.new_array[e].nonprizedarrear),interest:new s.e(this.result[e].interest),otheramount:new s.e(this.result[e].otheramount)}))}),console.log(t)}previous(){this.router.navigateByUrl("payment/cash")}edit(){this.router.navigate(["payment/cash"],{state:{user7:!0,user8:this.new_array}})}submitfunction(t){let e=localStorage.getItem("tokens");this.userdata=JSON.parse(localStorage.getItem("user2"));let n=this.userdata.MemberID;this.totals=0,this.todayvalue=localStorage.getItem("totalamounts"),this.paymentservice.toddayamount(n,e).subscribe(e=>{console.log(e),this.todaypaidamount=e,e&&(this.totals+=parseFloat(this.todaypaidamount),this.totals+=parseFloat(this.todayvalue.replace(/,/g,"")),console.log(this.totals),this.totals<2e5?this.submitcash(t):(console.log("max limit"),this.presentToast1("You have exceeded the Cash limit of \u20b92 lakh/day")))},t=>{401===t.status?(this.dismiss(),this.presentToast("Session timeout, please login to continue."),this.router.navigate(["/login"])):400===t.status&&(this.dismiss(),this.presentToast("Server Error! Please try login again."),this.router.navigate(["/login"]))})}submitcash(t){this.present(),this.sampletest=t.formArrayName,console.log(this.sampletest);let e=localStorage.getItem("tokens");this.paymentservice.cash_details(this.sampledata1,e).subscribe(t=>{if(console.log(t),this.receipt_res=t,null!=this.receipt_res){for(let t=0;t<this.receipt_res.length;t++)console.log(this.receipt_res[t].AlreadyusedNo),this.num=this.receipt_res[t].AlreadyusedNo+1,this.vnum=this.receipt_res[t].BranchName+""+this.num,this.num1.push(this.num),console.log(this.num1),this.vnum1.push(this.vnum),console.log(this.vnum1),this.ReceiptTable={AlreadyusedNo:this.num,BranchID:this.receipt_res[t].BranchID,HeadID:this.receipt_res[t].HeadID,BranchName:this.receipt_res[t].BranchName,From:this.receipt_res[t].From,ID:this.receipt_res[t].ID,Isfinished:this.receipt_res[t].Isfinished,To:this.receipt_res[t].To,VoucherCode:this.receipt_res[t].VoucherCode,VoucherNumber:this.vnum},console.log(this.ReceiptTable),this.ReceiptTable1.push(this.ReceiptTable),console.log(this.ReceiptTable1);this.paymentservice.receipt_update(this.ReceiptTable1,e).subscribe(t=>{if(console.log(t),this.res_status=t,console.log(this.res_status),0==this.res_status){for(let t of this.sampletest){console.log("object:",t);for(let e in t);}for(let t=0;t<this.sampletest.length;t++){this.sampletest[t].prizedarrear=this.sampletest[t].prizedarrear.replace(/,/g,""),this.sampletest[t].nonprizedarrear=this.sampletest[t].nonprizedarrear.replace(/,/g,""),this.sampletest[t].amountreceived=this.sampletest[t].amountreceived.replace(/,/g,""),this.sampletest[t].amountpayable=""!=this.sampletest[t].amountpayable?this.sampletest[t].amountpayable.replace(/,/g,""):0,console.log(this.sampletest[t].interest);var n=this.sampletest[t].branchprefix;this.voucher_count+=1,this.voucher_count>9999999&&(this.voucher_count=1,this.Receipt_code+=1);let e=this.padLeadingZeros(this.voucher_count,7);this.newvoucher_count=e,console.log(this.newvoucher_count,"dashb"),this.new_name=n,console.log(this.trigger,"trigg");let i=this.arraydata[this.Receipt_code].toUpperCase();this.receipt_name="B-"+this.new_name+localStorage.getItem("col_id")+"-"+i+this.newvoucher_count,console.log(this.receipt_name,"rec"),this.cashpdata=0!=this.sampletest[t].prizedarrear?[{Amount:this.sampletest[t].amountpayable,PArrear:this.sampletest[t].prizedarrear,CurrentDue:this.sampletest[t].amountreceived,B_Group:this.B_Groups[t],IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count=this.count+1,Voucher_Type:"C",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"Cash",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:this.sampletest[t].amountpayable,CurrentDue:this.sampletest[t].amountreceived,B_Group:this.B_Groups[t],PArrear:this.sampletest[t].prizedarrear,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count,IsAccepted:"0",Voucher_Type:"D",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"Cash",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:+this.sampletest[t].interest+ +this.sampletest[t].otheramount,Interest:this.sampletest[t].interest,B_Group:this.B_Groups[t],OtherAmt:this.sampletest[t].otheramount,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count=this.count+1,Voucher_Type:"C",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"DefaultInterest",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:+this.sampletest[t].interest+ +this.sampletest[t].otheramount,Interest:this.sampletest[t].interest,B_Group:this.B_Groups[t],OtherAmt:this.sampletest[t].otheramount,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count,Voucher_Type:"D",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"DefaultInterest",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code}]:0!=this.sampletest[t].nonprizedarrear?[{Amount:this.sampletest[t].amountpayable,CurrentDue:this.sampletest[t].amountreceived,B_Group:this.B_Groups[t],NPArrear:this.sampletest[t].nonprizedarrear,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count=this.count+1,Voucher_Type:"C",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"Cash",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:this.sampletest[t].amountpayable,CurrentDue:this.sampletest[t].amountreceived,B_Group:this.B_Groups[t],NPArrear:this.sampletest[t].nonprizedarrear,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count,IsAccepted:"0",Voucher_Type:"D",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"Cash",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:+this.sampletest[t].interest+ +this.sampletest[t].otheramount,Interest:this.sampletest[t].interest,OtherAmt:this.sampletest[t].otheramount,B_Group:this.B_Groups[t],IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count=this.count+1,Voucher_Type:"C",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"DefaultInterest",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:+this.sampletest[t].interest+ +this.sampletest[t].otheramount,Interest:this.sampletest[t].interest,B_Group:this.B_Groups[t],OtherAmt:this.sampletest[t].otheramount,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count,Voucher_Type:"D",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"DefaultInterest",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code}]:[{Amount:this.sampletest[t].amountpayable,CurrentDue:this.sampletest[t].amountreceived,B_Group:this.B_Groups[t],NPArrear:this.sampletest[t].nonprizedarrear,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count=this.count+1,Voucher_Type:"C",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"Cash",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:this.sampletest[t].amountpayable,CurrentDue:this.sampletest[t].amountreceived,B_Group:this.B_Groups[t],NPArrear:this.sampletest[t].nonprizedarrear,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count,IsAccepted:"0",Voucher_Type:"D",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"Cash",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:+this.sampletest[t].interest+ +this.sampletest[t].otheramount,Interest:this.sampletest[t].interest,B_Group:this.B_Groups[t],OtherAmt:this.sampletest[t].otheramount,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count=this.count+1,Voucher_Type:"C",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"DefaultInterest",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code},{Amount:+this.sampletest[t].interest+ +this.sampletest[t].otheramount,Interest:this.sampletest[t].interest,B_Group:this.B_Groups[t],OtherAmt:this.sampletest[t].otheramount,IsDeleted:0,MemberID:this.sampletest[t].memberid,ReceievedBy:"admin",Series:"BCAPP",T_Day:this.day,T_Month:this.month,T_Year:this.year,Trans_Medium:"0",Trans_Type:"1",TransactionKey:0,Voucher_No:this.count,Voucher_Type:"D",IsAccepted:"0",AppReceiptno:this.receipt_name,ISActive:!0,BranchID:this.sampletest[t].branchid,ChitGroupId:this.sampletest[t].chitgroupid,Head_Id:this.sampletest[t].headid,Other_Trans_Type:1,RootID:this.sampletest[t].rootid,M_Id:this.sampletest[t].m_id,Type:"DefaultInterest",MoneyCollId:this.post_id,VoucherCount:this.newvoucher_count,VoucherCode:this.Receipt_code}],console.log(this.cashpdata),this.cashdata.push(this.cashpdata),this.cashdata1=[].concat.apply([],this.cashdata);for(let t=this.cashdata1.length-1;t>=0;--t)"0"==this.cashdata1[t].Amount&&this.cashdata1.splice(t,1)}this.paymentservice.post_vouchercash(this.cashdata1,e).subscribe(t=>{if(t){this.dismiss(),this.voucher_res=t,this.presentToast("sucessfully updated");let e={queryParams:{state:JSON.stringify(this.voucher_res)},skipLocationChange:!0};this.router.navigate(["cashprint"],e)}else alert("voucher error"),this.dismiss()},t=>{401===t.status?(this.dismiss(),this.presentToast("Session timeout, please login to continue."),this.router.navigate(["/login"])):400===t.status&&(this.dismiss(),this.presentToast("Server Error! Please try login again."),this.router.navigate(["/login"]))})}else alert("error"),this.dismiss()},t=>{401===t.status?(this.dismiss(),this.presentToast("Session timeout, please login to continue."),this.router.navigate(["/login"])):400===t.status?(this.dismiss(),this.presentToast("Server Error! Please try login again."),this.router.navigate(["/login"])):(this.dismiss(),alert("server error"))})}},t=>{401===t.status?(this.dismiss(),this.presentToast("Session timeout, please login to continue."),this.router.navigate(["/login"])):400===t.status&&(this.dismiss(),this.presentToast("Server Error! Please try login again."),this.router.navigate(["/login"]))})}logout(){this.router.navigateByUrl("login"),localStorage.clear()}present(){return Object(a.a)(this,void 0,void 0,(function*(){return this.isLoading=!0,yield this.loadingController.create({message:"Saving data, Please wait....."}).then(t=>{t.present().then(()=>{this.isLoading||t.dismiss().then(()=>console.log("abort presenting"))})})}))}dismiss(){return Object(a.a)(this,void 0,void 0,(function*(){return this.isLoading=!1,yield this.loadingController.dismiss().then(()=>console.log("dismissed"))}))}padLeadingZeros(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}presentToast(t){return Object(a.a)(this,void 0,void 0,(function*(){this.toast.show(t,"2000","bottom").subscribe(t=>{console.log(t)})}))}presentToast1(t){return Object(a.a)(this,void 0,void 0,(function*(){this.toast.show(t,"3000","bottom").subscribe(t=>{console.log(t)})}))}}return t.\u0275fac=function(e){return new(e||t)(l.Kb(s.d),l.Kb(_.a),l.Kb(v.b),l.Kb(o.B),l.Kb(r.g),l.Kb(r.a),l.Kb(h.a))},t.\u0275cmp=l.Eb({type:t,selectors:[["app-payment"]],decls:26,vars:9,consts:[[1,"svcf_dashboard_page","svcf_payment_page"],[1,"customer_details"],["name","arrow-back-outline",2,"font-size","25px",3,"click"],["size","12"],["size","11",1,"customer_name"],["size","8"],["size","1",1,"menu"],["name","exit",3,"click"],[1,"payment","card_bg","space_padding"],[1,"page_title"],["name","create-outline","slot","end"],["novalidate","",1,"payment_form",3,"formGroup"],[3,"formArrayName"],[4,"ngFor","ngForOf"],[1,"grand_total"],["type","submit","expand","block",1,"btn",3,"click"],[3,"formGroupName"],[1,"chit_no"],["position","stacked"],["formControlName","amountreceived","value","","placeholder","Current Due","readonly",""],[4,"ngIf"],["formControlName","amountpayable","value","","placeholder","Amount Received","readonly",""],["formControlName","interest","value","","placeholder","interest","readonly",""],["formControlName","otheramount","value","","placeholder","otheramount","readonly",""],[1,"total"],[1,"total1"],["formControlName","prizedarrear","value","","placeholder","Prized Arrear","readonly",""],["formControlName","nonprizedarrear","value","","placeholder","Non-Prized Arrear","readonly",""]],template:function(t,e){1&t&&(l.Pb(0,"ion-content",0),l.Pb(1,"section",1),l.Pb(2,"ion-icon",2),l.Xb("click",(function(){return e.previous()})),l.Ob(),l.Pb(3,"ion-row",3),l.Pb(4,"ion-col",4),l.Pb(5,"h2",5),l.tc(6),l.Ob(),l.Pb(7,"h5",5),l.tc(8),l.bc(9,"date"),l.Ob(),l.Ob(),l.Pb(10,"ion-col",6),l.Pb(11,"ion-icon",7),l.Xb("click",(function(){return e.logout()})),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(12,"div",8),l.Pb(13,"div",9),l.Pb(14,"h3"),l.tc(15,"Chit Details"),l.Ob(),l.Lb(16,"ion-icon",10),l.Ob(),l.Pb(17,"form",11),l.Pb(18,"ion-list",12),l.sc(19,x,34,6,"div",13),l.Ob(),l.Ob(),l.Pb(20,"p",14),l.tc(21,"Grand Total"),l.Pb(22,"span"),l.tc(23),l.Ob(),l.Ob(),l.Pb(24,"ion-button",15),l.Xb("click",(function(){return e.submitfunction(e.submitForm.value)})),l.tc(25,"Submit "),l.Ob(),l.Ob(),l.Ob()),2&t&&(l.Ab(6),l.uc(null==e.new10[0]?null:e.new10[0].Membername),l.Ab(2),l.uc(l.cc(9,6,e.today,"dd/MM/yyyy")),l.Ab(9),l.fc("formGroup",e.submitForm),l.Ab(1),l.fc("formArrayName","formArrayName"),l.Ab(1),l.fc("ngForOf",e.result),l.Ab(4),l.vc("\u20b9 ",e.grandtotal1,""))},directives:[o.k,o.n,o.u,o.j,s.t,s.o,s.h,o.s,s.c,i.j,o.e,s.i,o.f,o.h,o.g,o.q,o.r,o.p,o.E,s.n,s.f,i.k],pipes:[i.d],styles:[".flex_arrow[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.bottom_sec[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.arrow[_ngcontent-%COMP%]{background:linear-gradient(90deg,#222428 0,#354466)!important}.payment[_ngcontent-%COMP%]{--background:linear-gradient(90deg,#222428 0%,#354466)!important}.payee_name[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-left:12px}.flex-page[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.flex-page[_ngcontent-%COMP%]   .payee_no[_ngcontent-%COMP%]{margin-left:12px}.flex-page[_ngcontent-%COMP%]   .data-no[_ngcontent-%COMP%]{margin-right:1rem;color:#5e5ca5;font-weight:700}.left[_ngcontent-%COMP%]{border-right:1px solid #f05940}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.title[_ngcontent-%COMP%]   .pipe[_ngcontent-%COMP%]{margin-left:12px}ion-card[_ngcontent-%COMP%]{background-color:#f6f6fa}.value[_ngcontent-%COMP%]{color:#272727}ion-checkbox[_ngcontent-%COMP%]{float:right}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:15px;float:right;margin-top:2px}.mode[_ngcontent-%COMP%]{margin-left:12px}.text[_ngcontent-%COMP%]{padding-left:10px}.icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.icon[_ngcontent-%COMP%]{font-size:22px;color:#6765aa}.cash-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:15px}.cash-content[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{display:block;font-size:14px;margin:16px 0}.alert-message.sc-ion-alert-md[_ngcontent-%COMP%]{font-size:18px}.exit[_ngcontent-%COMP%]{color:#fff;display:inline-block;font-size:22px;vertical-align:middle}.inner[_ngcontent-%COMP%]{margin-top:10px}.payable[_ngcontent-%COMP%]{font-weight:700}.payable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(52,162,20,.5215686274509804);padding:2px 10px;border-radius:5px}.align[_ngcontent-%COMP%]{margin-bottom:20px}.new_card[_ngcontent-%COMP%]{margin-top:20px}.total-chit[_ngcontent-%COMP%]{padding-right:12px}.align[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.align[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:-42px}.flex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.logout[_ngcontent-%COMP%]{padding-top:2rem;padding-right:2rem;color:#fff}.arrow[_ngcontent-%COMP%]{margin-top:1rem;margin-left:2rem;background:#37348b;border-radius:50%;color:#fff;font-size:30px}.today_date[_ngcontent-%COMP%]{color:#fff;margin-left:12px}.cash[_ngcontent-%COMP%]{--background:linear-gradient(90deg,#222428 0%,#354466)!important}.bottom_icon[_ngcontent-%COMP%]{position:fixed;left:85%;bottom:2px;border-radius:50%;font-size:28px;background:#37348b;padding:5px;color:#fff}.text1[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding-left:10px;color:#fff}.icon_tool[_ngcontent-%COMP%]{padding-top:1rem;padding-right:1rem}.payeename[_ngcontent-%COMP%]{margin-top:1rem}.bank[_ngcontent-%COMP%]{padding-left:8px}.amt[_ngcontent-%COMP%], .bank[_ngcontent-%COMP%]{font-weight:700}.amt[_ngcontent-%COMP%]{color:#000}ion-spinner[_ngcontent-%COMP%]{stroke:red;fill:#8b0000;position:fixed;z-index:999;height:5em;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0}.card_bg[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card_bg[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:700}"]}),t})();var A=n("hctd");const T=[{path:"",component:b},{path:"cash",component:O},{path:"cashpay",component:I}];let z=(()=>{class t{}return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(e){return new(e||t)},providers:[_.a],imports:[[i.b,s.j,A.a,o.z,s.r,r.i.forChild(T)]]}),t})()}}]);